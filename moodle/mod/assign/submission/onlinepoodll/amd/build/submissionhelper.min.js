define(["jquery","core/log","core/str"],function(a,b,c){"use strict";return b.debug("submission helper: initialising"),{uploadstate:!1,togglestate:0,strings:{},init:function(a){this.component=a.component,this.filecontrolid=a.filecontrolid,this.togglingthing=a.togglingthing,this.register_controls(),this.register_events(),"currentsubmission"==this.togglingthing&&a.expandcurrentsubmission&&this.toggle_currentsubmission(this)},register_controls:function(){var b=this;this.controls={},this.controls.deletebutton=a("."+this.component+"_deletesubmissionbutton"),this.controls.updatecontrol=a("#"+this.filecontrolid),this.controls.currentcontainer=a("."+this.component+"_currentsubmission"),this.controls.reccontainer=a("."+this.component+"_recorder"),this.controls.togglecontainer=a("."+this.component+"_togglecontainer"),this.controls.togglebutton=a("."+this.component+"_togglecontainer .togglebutton"),this.controls.toggletext=a("."+this.component+"_togglecontainer .toggletext"),c.get_string("clicktohide",b.component).done(function(a){b.strings.clicktohide=a}),c.get_string("clicktoshow",b.component).done(function(a){b.strings.clicktoshow=a})},register_events:function(){var a=this;this.controls.deletebutton.click(function(){a.controls.updatecontrol&&confirm(M.util.get_string("reallydeletesubmission",a.component))&&(a.controls.updatecontrol.val(-1),a.controls.currentcontainer.html(""))}),"currentsubmission"===this.togglingthing?(this.controls.togglebutton.click(function(){a.toggle_currentsubmission(a)}),this.controls.toggletext.click(function(){a.toggle_currentsubmission(a)})):"recorder"===this.togglingthing&&(this.controls.togglebutton.click(function(){a.toggle_recorder(a)}),this.controls.toggletext.click(function(){a.toggle_recorder(a)}))},do_toggle:function(a){0===a.togglestate?(a.controls.togglebutton.removeClass("fa-toggle-off"),a.controls.togglebutton.addClass("fa-toggle-on"),a.controls.toggletext.text(a.strings.clicktohide),a.togglestate=1):(a.controls.togglebutton.removeClass("fa-toggle-on"),a.controls.togglebutton.addClass("fa-toggle-off"),a.controls.toggletext.text(a.strings.clicktoshow),a.togglestate=0)},toggle_currentsubmission:function(a){return a.controls.currentcontainer.toggle({duration:300,complete:function(){a.do_toggle(a)}}),!1},toggle_recorder:function(a){return a.controls.reccontainer.toggle({duration:300,complete:function(){a.do_toggle(a)}}),!1}}});